{
  "query": "CREATE TABLE IF NOT EXISTS `admin_whatsapp_automations` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `name` varchar(255) NOT NULL,\n  `description` text,\n  `trigger` enum('lead_trial_signup','lead_trial_2days_before','lead_trial_expired','lead_followup_7days','personal_payment_2days','personal_payment_dueday','personal_payment_overdue','personal_payment_confirmed','personal_reengagement_30days','custom') NOT NULL,\n  `targetType` enum('lead','personal','both') DEFAULT 'lead',\n  `messageTemplate` text NOT NULL,\n  `isActive` boolean NOT NULL DEFAULT true,\n  `delayMinutes` int DEFAULT 0,\n  `sendWindowStart` varchar(5) DEFAULT '08:00',\n  `sendWindowEnd` varchar(5) DEFAULT '20:00',\n  `sendOnWeekends` boolean DEFAULT false,\n  `excludeExistingPersonals` boolean DEFAULT true,\n  `excludeRecentMessages` int DEFAULT 24,\n  `totalSent` int DEFAULT 0,\n  `totalDelivered` int DEFAULT 0,\n  `totalRead` int DEFAULT 0,\n  `totalReplied` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `admin_whatsapp_automations_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `admin_whatsapp_config` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `stevoApiKey` varchar(255),\n  `stevoInstanceName` varchar(255),\n  `stevoServer` varchar(50) DEFAULT 'sm15',\n  `stevoWebhookToken` varchar(255),\n  `connectionStatus` enum('disconnected','connecting','connected','error') DEFAULT 'disconnected',\n  `lastConnectedAt` timestamp NULL,\n  `lastErrorMessage` text,\n  `connectedPhone` varchar(20),\n  `connectedName` varchar(255),\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `admin_whatsapp_config_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `admin_whatsapp_messages` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `recipientType` enum('lead','personal') NOT NULL,\n  `recipientId` int NOT NULL,\n  `recipientPhone` varchar(20) NOT NULL,\n  `recipientName` varchar(255),\n  `direction` enum('outbound','inbound') NOT NULL,\n  `message` text NOT NULL,\n  `messageType` enum('text','image','document','audio','video') DEFAULT 'text',\n  `mediaUrl` varchar(500),\n  `automationId` int,\n  `status` enum('pending','sent','delivered','read','failed') DEFAULT 'pending',\n  `stevoMessageId` varchar(255),\n  `errorMessage` text,\n  `scheduledAt` timestamp NULL,\n  `sentAt` timestamp NULL,\n  `deliveredAt` timestamp NULL,\n  `readAt` timestamp NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT `admin_whatsapp_messages_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `admin_whatsapp_queue` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `recipientType` enum('lead','personal') NOT NULL,\n  `recipientId` int NOT NULL,\n  `recipientPhone` varchar(20) NOT NULL,\n  `recipientName` varchar(255),\n  `message` text NOT NULL,\n  `automationId` int,\n  `status` enum('pending','processing','sent','failed','cancelled') DEFAULT 'pending',\n  `errorMessage` text,\n  `retryCount` int DEFAULT 0,\n  `scheduledAt` timestamp NOT NULL,\n  `processedAt` timestamp NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT `admin_whatsapp_queue_id` PRIMARY KEY(`id`)\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3TwTEpp3aQwpk4j.26ab54900c35 --database SFH8sqABSCK5KntMvXXcPM --execute CREATE TABLE IF NOT EXISTS `admin_whatsapp_automations` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `name` varchar(255) NOT NULL,\n  `description` text,\n  `trigger` enum('lead_trial_signup','lead_trial_2days_before','lead_trial_expired','lead_followup_7days','personal_payment_2days','personal_payment_dueday','personal_payment_overdue','personal_payment_confirmed','personal_reengagement_30days','custom') NOT NULL,\n  `targetType` enum('lead','personal','both') DEFAULT 'lead',\n  `messageTemplate` text NOT NULL,\n  `isActive` boolean NOT NULL DEFAULT true,\n  `delayMinutes` int DEFAULT 0,\n  `sendWindowStart` varchar(5) DEFAULT '08:00',\n  `sendWindowEnd` varchar(5) DEFAULT '20:00',\n  `sendOnWeekends` boolean DEFAULT false,\n  `excludeExistingPersonals` boolean DEFAULT true,\n  `excludeRecentMessages` int DEFAULT 24,\n  `totalSent` int DEFAULT 0,\n  `totalDelivered` int DEFAULT 0,\n  `totalRead` int DEFAULT 0,\n  `totalReplied` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `admin_whatsapp_automations_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `admin_whatsapp_config` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `stevoApiKey` varchar(255),\n  `stevoInstanceName` varchar(255),\n  `stevoServer` varchar(50) DEFAULT 'sm15',\n  `stevoWebhookToken` varchar(255),\n  `connectionStatus` enum('disconnected','connecting','connected','error') DEFAULT 'disconnected',\n  `lastConnectedAt` timestamp NULL,\n  `lastErrorMessage` text,\n  `connectedPhone` varchar(20),\n  `connectedName` varchar(255),\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `admin_whatsapp_config_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `admin_whatsapp_messages` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `recipientType` enum('lead','personal') NOT NULL,\n  `recipientId` int NOT NULL,\n  `recipientPhone` varchar(20) NOT NULL,\n  `recipientName` varchar(255),\n  `direction` enum('outbound','inbound') NOT NULL,\n  `message` text NOT NULL,\n  `messageType` enum('text','image','document','audio','video') DEFAULT 'text',\n  `mediaUrl` varchar(500),\n  `automationId` int,\n  `status` enum('pending','sent','delivered','read','failed') DEFAULT 'pending',\n  `stevoMessageId` varchar(255),\n  `errorMessage` text,\n  `scheduledAt` timestamp NULL,\n  `sentAt` timestamp NULL,\n  `deliveredAt` timestamp NULL,\n  `readAt` timestamp NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT `admin_whatsapp_messages_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `admin_whatsapp_queue` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `recipientType` enum('lead','personal') NOT NULL,\n  `recipientId` int NOT NULL,\n  `recipientPhone` varchar(20) NOT NULL,\n  `recipientName` varchar(255),\n  `message` text NOT NULL,\n  `automationId` int,\n  `status` enum('pending','processing','sent','failed','cancelled') DEFAULT 'pending',\n  `errorMessage` text,\n  `retryCount` int DEFAULT 0,\n  `scheduledAt` timestamp NOT NULL,\n  `processedAt` timestamp NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT `admin_whatsapp_queue_id` PRIMARY KEY(`id`)\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 1050
}