{
  "query": "CREATE TABLE IF NOT EXISTS `lead_funnel_history` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `leadId` int NOT NULL,\n  `fromStage` varchar(50),\n  `toStage` varchar(50) NOT NULL,\n  `changedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `changedBy` varchar(50) DEFAULT 'system',\n  `reason` text,\n  CONSTRAINT `lead_funnel_history_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `lead_funnel_stages` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `leadId` int NOT NULL,\n  `stage` enum('new_lead','quiz_started','quiz_completed','trial_started','trial_active','trial_expiring','trial_expired','converted','lost','reengagement') NOT NULL DEFAULT 'new_lead',\n  `previousStage` varchar(50),\n  `changedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `changedBy` varchar(50) DEFAULT 'system',\n  `notes` text,\n  CONSTRAINT `lead_funnel_stages_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `whatsapp_bulk_send_queue` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `batchId` varchar(50) NOT NULL,\n  `leadId` int NOT NULL,\n  `phone` varchar(20) NOT NULL,\n  `message` text NOT NULL,\n  `status` enum('pending','sending','sent','failed','cancelled') DEFAULT 'pending',\n  `whatsappNumberId` int,\n  `scheduledAt` timestamp NULL,\n  `sentAt` timestamp NULL,\n  `errorMessage` text,\n  `retryCount` int DEFAULT 0,\n  `delayMs` int DEFAULT 6000,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT `whatsapp_bulk_send_queue_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `whatsapp_daily_stats` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `date` date NOT NULL,\n  `whatsappNumberId` int,\n  `messagesSent` int DEFAULT 0,\n  `messagesReceived` int DEFAULT 0,\n  `messagesFailed` int DEFAULT 0,\n  `conversationsStarted` int DEFAULT 0,\n  `messagesNewLeads` int DEFAULT 0,\n  `messagesTrialActive` int DEFAULT 0,\n  `messagesTrialExpiring` int DEFAULT 0,\n  `messagesConverted` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT `whatsapp_daily_stats_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `whatsapp_message_suggestions` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `stage` varchar(50) NOT NULL,\n  `title` varchar(255) NOT NULL,\n  `message` text NOT NULL,\n  `variables` text,\n  `isDefault` boolean DEFAULT false,\n  `usageCount` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `whatsapp_message_suggestions_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `whatsapp_numbers` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `name` varchar(255) NOT NULL,\n  `phone` varchar(20) NOT NULL,\n  `stevoApiKey` varchar(255),\n  `stevoInstanceName` varchar(255),\n  `stevoServer` varchar(50) DEFAULT 'sm15',\n  `status` enum('disconnected','connecting','connected','error','banned') DEFAULT 'disconnected',\n  `lastConnectedAt` timestamp NULL,\n  `lastErrorMessage` text,\n  `dailyMessageLimit` int DEFAULT 200,\n  `messagesSentToday` int DEFAULT 0,\n  `lastMessageSentAt` timestamp NULL,\n  `lastLimitResetAt` timestamp NULL,\n  `totalMessagesSent` int DEFAULT 0,\n  `totalMessagesReceived` int DEFAULT 0,\n  `totalConversations` int DEFAULT 0,\n  `priority` int DEFAULT 1,\n  `isActive` boolean DEFAULT true,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `whatsapp_numbers_id` PRIMARY KEY(`id`)\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3TwTEpp3aQwpk4j.26ab54900c35 --database SFH8sqABSCK5KntMvXXcPM --execute CREATE TABLE IF NOT EXISTS `lead_funnel_history` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `leadId` int NOT NULL,\n  `fromStage` varchar(50),\n  `toStage` varchar(50) NOT NULL,\n  `changedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `changedBy` varchar(50) DEFAULT 'system',\n  `reason` text,\n  CONSTRAINT `lead_funnel_history_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `lead_funnel_stages` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `leadId` int NOT NULL,\n  `stage` enum('new_lead','quiz_started','quiz_completed','trial_started','trial_active','trial_expiring','trial_expired','converted','lost','reengagement') NOT NULL DEFAULT 'new_lead',\n  `previousStage` varchar(50),\n  `changedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `changedBy` varchar(50) DEFAULT 'system',\n  `notes` text,\n  CONSTRAINT `lead_funnel_stages_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `whatsapp_bulk_send_queue` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `batchId` varchar(50) NOT NULL,\n  `leadId` int NOT NULL,\n  `phone` varchar(20) NOT NULL,\n  `message` text NOT NULL,\n  `status` enum('pending','sending','sent','failed','cancelled') DEFAULT 'pending',\n  `whatsappNumberId` int,\n  `scheduledAt` timestamp NULL,\n  `sentAt` timestamp NULL,\n  `errorMessage` text,\n  `retryCount` int DEFAULT 0,\n  `delayMs` int DEFAULT 6000,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT `whatsapp_bulk_send_queue_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `whatsapp_daily_stats` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `date` date NOT NULL,\n  `whatsappNumberId` int,\n  `messagesSent` int DEFAULT 0,\n  `messagesReceived` int DEFAULT 0,\n  `messagesFailed` int DEFAULT 0,\n  `conversationsStarted` int DEFAULT 0,\n  `messagesNewLeads` int DEFAULT 0,\n  `messagesTrialActive` int DEFAULT 0,\n  `messagesTrialExpiring` int DEFAULT 0,\n  `messagesConverted` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  CONSTRAINT `whatsapp_daily_stats_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `whatsapp_message_suggestions` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `stage` varchar(50) NOT NULL,\n  `title` varchar(255) NOT NULL,\n  `message` text NOT NULL,\n  `variables` text,\n  `isDefault` boolean DEFAULT false,\n  `usageCount` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `whatsapp_message_suggestions_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `whatsapp_numbers` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `name` varchar(255) NOT NULL,\n  `phone` varchar(20) NOT NULL,\n  `stevoApiKey` varchar(255),\n  `stevoInstanceName` varchar(255),\n  `stevoServer` varchar(50) DEFAULT 'sm15',\n  `status` enum('disconnected','connecting','connected','error','banned') DEFAULT 'disconnected',\n  `lastConnectedAt` timestamp NULL,\n  `lastErrorMessage` text,\n  `dailyMessageLimit` int DEFAULT 200,\n  `messagesSentToday` int DEFAULT 0,\n  `lastMessageSentAt` timestamp NULL,\n  `lastLimitResetAt` timestamp NULL,\n  `totalMessagesSent` int DEFAULT 0,\n  `totalMessagesReceived` int DEFAULT 0,\n  `totalConversations` int DEFAULT 0,\n  `priority` int DEFAULT 1,\n  `isActive` boolean DEFAULT true,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `whatsapp_numbers_id` PRIMARY KEY(`id`)\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 1401
}